[supervisord]
nodaemon=true
user=root
logfile=/app/logs/supervisord.log
pidfile=/app/logs/supervisord.pid

[program:nginx]
command=nginx -g "daemon off;"
autostart=true
autorestart=true
stderr_logfile=/app/logs/nginx_error.log
stdout_logfile=/app/logs/nginx_access.log

[program:django]
command=/opt/venv/bin/gunicorn noctis_pro.wsgi:application --bind 0.0.0.0:8000 --workers 4 --timeout 300
directory=/app
user=app
autostart=true
autorestart=true
stderr_logfile=/app/logs/django_error.log
stdout_logfile=/app/logs/django_access.log

[program:ai-worker]
command=/opt/venv/bin/python manage.py process_ai_analyses --continuous
directory=/app
user=app
autostart=true
autorestart=true
stderr_logfile=/app/logs/ai_worker_error.log
stdout_logfile=/app/logs/ai_worker.log

[program:backup-scheduler]
command=/opt/venv/bin/python manage.py start_backup_scheduler --daemon
directory=/app
user=app
autostart=true
autorestart=true
stderr_logfile=/app/logs/backup_error.log
stdout_logfile=/app/logs/backup.log

[program:cron]
command=cron -f
autostart=true
autorestart=true